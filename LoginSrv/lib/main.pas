unit Main;{$mode objfpc}{$H+}interfaceuses  Classes, SysUtils, FileUtil, Forms, Controls, Graphics, Dialogs, Menus,  ComCtrls, StdCtrls, ZConnection, ZDataset, AccountDB, xmlfile, ufrmConfig, ufrmDB;type  { TMainForm }  TMainForm = class(TForm)    LogMemo: TMemo;    Mi_Account: TMenuItem;    Mi_DB: TMenuItem;    MI_Option: TMenuItem;    MI_Config: TMenuItem;    MI_StopServer: TMenuItem;    Mitem_Server: TMenuItem;    MI_ServerStart: TMenuItem;    MMenu: TMainMenu;    stat: TStatusBar;    ZConnection1: TZConnection;    ZQuery1: TZQuery;    procedure FormCreate(Sender: TObject);    procedure Mitem_ServerClick(Sender: TObject);    procedure Mi_AccountClick(Sender: TObject);    procedure MI_ConfigClick(Sender: TObject);    procedure MI_OptionClick(Sender: TObject);    procedure MI_ServerStartClick(Sender: TObject);    procedure MI_StopServerClick(Sender: TObject);    procedure ZConnection1AfterConnect(Sender: TObject);    procedure ZConnection1BeforeConnect(Sender: TObject);  private    { private declarations }  public    { public declarations }  end;procedure MainOut(Msg: string);var  MainForm: TMainForm;implementation{$R *.lfm}{ TMainForm }procedure TMainForm.Mitem_ServerClick(Sender: TObject);beginend;procedure TMainForm.Mi_AccountClick(Sender: TObject);begin  frmDB.Show;end;procedure TMainForm.MI_ConfigClick(Sender: TObject);beginend;procedure TMainForm.MI_OptionClick(Sender: TObject);begin  FrmConfig.Show;end;procedure TMainForm.MI_ServerStartClick(Sender: TObject);var  s: string;begin  with ufrmConfig.FrmConfig do  begin    ZConnection1.HostName := Config.DataBaseIP;    ZConnection1.Port := Config.DataBasePort;    Zconnection1.User := Config.DataBaseUser;    Zconnection1.Password := Config.DataBasePw;    Zconnection1.Database := Config.DataBaseName;  end;  Zconnection1.Connected := True;end;procedure TMainForm.FormCreate(Sender: TObject);begin  Caption := Formatdatetime('YYYY/MM/DD HH:NN', now());end;procedure TMainForm.MI_StopServerClick(Sender: TObject);beginend;procedure TMainForm.ZConnection1AfterConnect(Sender: TObject);begin  MainOut('正在连接数据库');end;procedure TMainForm.ZConnection1BeforeConnect(Sender: TObject);begin  MainOut('数据库连接完成');end;procedure MainOut(Msg: string);var  s: string;begin  s := FormatDateTime('M/D-HH:MM:SS', Now());  s := s + '     ' + msg;  MainForm.LogMemo.Append(s);end;end.